<% total_distance = challenge.participations.sum(:distance) || 0
  progress_percentage = if participation&.distance.present? && challenge.distance.present?
                          ((participation.distance.to_f / challenge.distance.to_f) * 100).round
                        else
                          0
                        end %>

<div class="progress-percentage text-center mt-3">
  <h3 class="text-center"><strong><%= progress_percentage %> %</strong></h3>
  <%= render 'challenges/progress_bar', challenge: challenge, participation: participation %>
  <p class="progress-distance">
    Goal: <%= challenge.distance.present? ? challenge.distance.round : 'N/A' %>km
  </p>
</div>
